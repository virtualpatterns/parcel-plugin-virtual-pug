{"version":3,"sources":["../../source/library/asset.cjs"],"names":["ConvertToVirtualNode","VirtualNode","VirtualText","FilePath","__filename","Require","require","Package","JSON5","parse","FileSystem","readFileSync","resolve","Asset","BaseAsset","constructor","parameter","type","generate","source","Transform","getModuleSourceFromContent","contents","name","formatSource","module","exports"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;;;AAJA;AAKA,MAAMA,oBAAoB,GAAG,yBAAsB;AAAE,WAASC,cAAX;AAAwB,WAASC;AAAjC,CAAtB,CAA7B,C,CACA;;AAEA,MAAMC,QAAQ,GAddC,UAcA;AACA,MAAMC,OAAO,GAfbC,OAeA;;AAEA,MAAMC,OAAO,GAAGC,cAAMC,KAAN,CAAYC,iBAAWC,YAAX,CAAwBN,OAAO,CAACO,OAAR,CAAgB,oBAAhB,CAAxB,EAA+D;AAAE,cAAY;AAAd,CAA/D,CAAZ,CAAhB;;AAEA,MAAMC,KAAN,SAAoBC,oBAApB,CAA8B;AAE5BC,EAAAA,WAAW,CAAC,GAAGC,SAAJ,EAAe;AACxB,UAAM,GAAGA,SAAT;AACA,SAAKC,IAAL,GAAY,IAAZ;AACD;;AAED,QAAMC,QAAN,GAAiB;AAEf,QAAIC,MAAM,GAAG,IAAb;AACAA,IAAAA,MAAM,GAAG,MAAMC,6BAAUC,0BAAV,CAAqC,KAAKC,QAA1C,EAAoD;AAAE,cAAQ,KAAKC;AAAf,KAApD,CAAf,CAHe,CAKf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAJ,IAAAA,MAAM,GAAG,MAAMC,6BAAUI,YAAV,CAAuBL,MAAvB,EAA+B,UAA/B,CAAf;AAEA,WAAO,CAAC;AACN,cAAQ,IADF;AAEN,eAASA;AAFH,KAAD,CAAP;AAKD;;AA/B2B,C,CAmC9B;;;AACAM,MAAM,CAACC,OAAP,GAAiBb,KAAjB","sourcesContent":["import { Asset as BaseAsset } from 'parcel-bundler'\nimport FileSystem from 'fs-extra'\nimport JSON5 from 'json5'\nimport Path from 'path'\nimport { Transform } from '@virtualpatterns/mablung-virtual-pug'\n\n// used in source below\nimport CreateVirtualNode from 'virtual-dom/h.js'\nimport _ConvertToVirtualNode from 'html-to-vdom'\nimport VirtualNode from 'virtual-dom/vnode/vnode.js'\nimport VirtualText from 'virtual-dom/vnode/vtext.js'\nconst ConvertToVirtualNode = _ConvertToVirtualNode({ 'VNode': VirtualNode, 'VText': VirtualText })\n// used in source below\n\nconst FilePath = __filePath\nconst Require = __require\n\nconst Package = JSON5.parse(FileSystem.readFileSync(Require.resolve('../../package.json'), { 'encoding': 'utf-8' }))\n\nclass Asset extends BaseAsset {\n\n  constructor(...parameter) {\n    super(...parameter)\n    this.type = 'js'\n  }\n\n  async generate() {\n\n    let source = null\n    source = await Transform.getModuleSourceFromContent(this.contents, { 'path': this.name })\n\n    // source =  ` import CreateVirtualNode from 'virtual-dom/h.js'\n    //             import _ConvertToVirtualNode from 'html-to-vdom'\n    //             import VirtualNode from 'virtual-dom/vnode/vnode.js'\n    //             import VirtualText from 'virtual-dom/vnode/vtext.js'\n    //             const ConvertToVirtualNode = _ConvertToVirtualNode({ 'VNode': VirtualNode, 'VText': VirtualText })\n    //             ${source}\n    //             export default function(__local = {}, __option = { 'createNode': CreateVirtualNode, 'convertToNode': ConvertToVirtualNode }) { \n    //               // Powered by ${Package.name} v${Package.version}\n    //               // FilePath = '${Path.relative('', FilePath)}'\n    //               return __getNode(__local, __option) \n    //             }`\n            \n    source = await Transform.formatSource(source, 'esmodule')\n\n    return [{\n      'type': 'js',\n      'value': source\n    }] \n  \n  }\n\n}\n\n// export default Asset\nmodule.exports = Asset"],"file":"asset.cjs"}