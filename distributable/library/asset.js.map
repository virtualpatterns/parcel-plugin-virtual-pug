{"version":3,"sources":["../../source/library/asset.js"],"names":["Asset","BaseAsset","constructor","parameter","type","generate","source","Transform","getFunctionSourceFromContent","contents","name","formatSource","module","exports"],"mappings":";;AAAA;;AAEA;;AADA;AAGA,MAAMA,KAAN,SAAoBC,oBAApB,CAA8B;AAE5BC,EAAAA,WAAW,CAAC,GAAGC,SAAJ,EAAe;AACxB,UAAM,GAAGA,SAAT;AACA,SAAKC,IAAL,GAAY,IAAZ;AACD;;AAED,QAAMC,QAAN,GAAiB;AACf;AAEA,QAAIC,MAAM,GAAG,IAAb;AACAA,IAAAA,MAAM,GAAG,MAAMC,6BAAUC,4BAAV,CAAuC,KAAKC,QAA5C,EAAsD;AAAE,cAAQ,KAAKC;AAAf,KAAtD,CAAf;AACAJ,IAAAA,MAAM,GAAK;;;;;kBAKGA,MAAO;;;kBALrB;AAUAA,IAAAA,MAAM,GAAG,MAAMC,6BAAUI,YAAV,CAAuBL,MAAvB,CAAf;AAEA,WAAO,CAAC;AACN,cAAQ,IADF;AAEN,eAASA;AAFH,KAAD,CAAP;AAKD;;AA7B2B;;AAiC9BM,MAAM,CAACC,OAAP,GAAiBb,KAAjB","sourcesContent":["import { Asset as BaseAsset } from 'parcel-bundler'\n// import Path from 'path'\nimport { Transform } from '@virtualpatterns/mablung-virtual-pug'\n\nclass Asset extends BaseAsset {\n\n  constructor(...parameter) {\n    super(...parameter)\n    this.type = 'js'\n  }\n\n  async generate() {\n    // console.log(`Asset.generate() this.name = '${Path.relative('', this.name)}'`)\n\n    let source = null\n    source = await Transform.getFunctionSourceFromContent(this.contents, { 'path': this.name })\n    source =  ` import CreateVirtualNode from 'virtual-dom/h.js'\n                import _ConvertToVirtualNode from 'html-to-vdom'\n                import VirtualNode from 'virtual-dom/vnode/vnode.js'\n                import VirtualText from 'virtual-dom/vnode/vtext.js'\n                const ConvertToVirtualNode = _ConvertToVirtualNode({ 'VNode': VirtualNode, 'VText': VirtualText })\n                ${source}\n                export default function(__local = {}, __option = { 'createNode': CreateVirtualNode, 'convertToNode': ConvertToVirtualNode }) { \n                  return __getNode(__local, __option) \n                }`\n            \n    source = await Transform.formatSource(source)\n\n    return [{\n      'type': 'js',\n      'value': source\n    }] \n  \n  }\n\n}\n\nmodule.exports = Asset"],"file":"asset.js"}